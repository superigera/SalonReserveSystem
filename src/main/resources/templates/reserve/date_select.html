<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">
<head>
<meta charset="UTF-8">

<link href='../../lib/main.css' rel='stylesheet' />
<script src='../../lib/main.js'></script>
<title>予約確認画面</title>
<style>
body {
	background-image:
		url("https://boccitabi.net/photostock/wp-content/uploads/2021/04/4472830_s_1024.jpg");
	background-size: cover;
}

input {
	border-radius: 30px;
	line-height: 30px;
	width: 350px;
	border-radius: 30px;
	margin:auto;
}

div.flex {
	display: flex;
	justify-content: space-between;
}

button {
	border: solid;
	border-color: #80a491;
	border-radius: 10px;
	background: transparent;
	color: #80a491;
}


</style>
</head>
<body>
	<div layout:fragment="content">
		<!-- 選択しているメニュー -->
		<div class="flex"  style="display: flex; margin-top: 30px; margin-left: 30px; border-radius: 10px;">
			<table border="3" style="display: flex; background-color: #ffffff; border-radius: 10px ">
				<tr>
					<th>選択しているメニュー　</th>
					<th>メニュー名　</th>
					<th>料金　</th>
					<th>所要時間目安　</th>
					<th>日付</th>
					<th>時間</th>
					<th></th>
				<tr>
				<form action="/reserve/input_info" method="post" th:object="${menu}">
					<tr th:each="menu_item:${menus}">
						<input type="hidden" th:name="menu_id" th:value="${menu_item.menu_id}"> 
						<td></td>
						<td th:text="${menu_item.menu_name}"></td>
						<td th:text="${menu_item.menu_price}"></td>
						<td th:text="${menu_item.menu_times}"></td>
						<td id="day">
						</td>
						<input id= days type="hidden" name="day"> 
						<td>
							<select name="time">
								<option value="9">9:00</option>
								<option value="10">10:00</option>
								<option value="11">11:00</option>
								<option value="12">12:00</option>
								<option value="13">13:00</option>
								<option value="15">15:00</option>
								<option value="16">16:00</option>
								<option value="17">17:00</option>
								<option value="18">18:00</option>
								<option value="19">19:00</option>
							</select>
						</td>
						<td>
							<button type="submit">予約</button>
						</td>
					</tr>
				</form>
			</table>
			<!-- 戻るボタン -->
			<form action="/reserve/new_reserve" method="get">
				<button type="submit" style="background-color: #ffffff; margin-right: 10px; padding: 10px; border-radius: 10px; ">メニュー選択に戻る</button>
			</form>
		</div>

		<!-- カレンダー -->
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				var calendarEl = document.getElementById('calendar');
				var calendar = new FullCalendar.Calendar(calendarEl, {
					
					locale: 'ja',
					height: '500px',
					
					headerToolbar : {
						left : 'prev',
						center : 'title',
						right : 'next'
					},
					navLinks: true,
					
					//カレンダーの日付押下時に選択しているメニューへ日付を追加
					navLinkDayClick: function(date) {
						const text = document.getElementById("day").textContent;
						document.getElementById("day").textContent = `${date.getMonth()+1}月${date.getDate()}日`
						document.getElementById("days").setAttribute("value", "" + (date.getMonth()+1) + ":" + date.getDate());
					},
					businessHours : true, 
					selectable : true,
		
				});
		
				calendar.render();
			});
		</script>
		<div id='calendar' style="margin: auto; width: 500px; background-color: #ffffff; margin-top: 20px"></div>

	</div>
</body>
</html>
