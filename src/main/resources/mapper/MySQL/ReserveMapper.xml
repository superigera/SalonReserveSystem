<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="com.example.repository.ReserveMapper">

	<!-- 本日予約取得 -->
	<select id="findTodayReserve" resultType="com.example.model.Reserve">
		select  reservations_id,non_member_name,reserve_days,reserve_time,menu_name,menu_times
		from reservations
		inner join menu
		on reservations.menu_id = menu.menu_id
		where reserve_days = #{day}
		order by reserve_days,reserve_time asc
	</select>
	
	<!-- 検索予約取得 -->
	<select id="findSearchReserve" resultType="com.example.model.Reserve">
		select  reservations_id,non_member_name,reserve_days,reserve_time,menu_name,menu_times
		from reservations
		inner join menu
		on reservations.menu_id = menu.menu_id
		where reserve_days = #{day}
		or non_member_name = #{name}
		order by reserve_days,reserve_time desc
	</select>
	
	<!-- 予約キャンセル -->
	<delete id="cancelReserve">
		delete from reservations where reservations_id = #{cancel_id}
	</delete>
	
	<!-- 予約登録 -->
	<insert id="reserve">
		insert into reservations(
	 	menu_id,
	 	non_member_name,
		non_member_email,
		non_member_phone_number,
		reserve_days,
		reserve_time
		)
		values(
		#{menu_id},
		#{non_member_name},
		#{non_member_email},
		#{non_member_phone_number},
		#{reserve_days},
		#{reserve_time}
		)
	</insert>
</mapper>